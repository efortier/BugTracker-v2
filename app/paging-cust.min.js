angular.module("bw.paging",[]).directive("bwPaging",function(){function t(t,a){t.List=[],t.Hide=!1,t.page=parseInt(t.page)||1,t.total=parseInt(t.total)||0,t.adjacent=parseInt(t.adjacent)||2,t.pgHref=t.pgHref||"",t.dots=t.dots||"...",t.ulClass=t.ulClass||"pagination",t.activeClass=t.activeClass||"active",t.disabledClass=t.disabledClass||"disabled",t.textFirst=t.textFirst||"<<",t.textLast=t.textLast||">>",t.textNext=t.textNext||">",t.textPrev=t.textPrev||"<",t.textFirstClass=t.textFirstClass||"",t.textLastClass=t.textLastClass||"",t.textNextClass=t.textNextClass||"",t.textPrevClass=t.textPrevClass||"",t.textTitlePage=t.textTitlePage||"Page {page}",t.textTitleFirst=t.textTitleFirst||"First Page",t.textTitleLast=t.textTitleLast||"Last Page",t.textTitleNext=t.textTitleNext||"Next Page",t.textTitlePrev=t.textTitlePrev||"Previous Page",t.hideIfEmpty=e(t,a.hideIfEmpty),t.showPrevNext=e(t,a.showPrevNext),t.showFirstLast=e(t,a.showFirstLast),t.scrollTop=e(t,a.scrollTop),t.isDisabled=e(t,a.disabled)}function e(t,e){return!!angular.isDefined(e)&&!!t.$parent.$eval(e)}function a(t,e){t.page>e&&(t.page=e),t.page<=0&&(t.page=1),t.adjacent<=0&&(t.adjacent=2),e<=1&&(t.Hide=t.hideIfEmpty)}function s(t,e){t.page!=e&&(t.isDisabled||(t.page=e,t.pagingAction({page:t.page,pageSize:t.pageSize,total:t.total}),t.scrollTop&&scrollTo(0,0)))}function i(t,e,a){if(!(!t.showPrevNext&&!t.showFirstLast||e<1)){var i,l,r;if("prev"===a){i=t.page-1<=0;var n=t.page-1<=0?1:t.page-1;t.showFirstLast&&(l={value:t.textFirst,title:t.textTitleFirst,aClass:t.textFirstClass,page:1}),t.showPrevNext&&(r={value:t.textPrev,title:t.textTitlePrev,aClass:t.textPrevClass,page:n})}else{i=t.page+1>e;var g=t.page+1>=e?e:t.page+1;t.showPrevNext&&(l={value:t.textNext,title:t.textTitleNext,aClass:t.textNextClass,page:g}),t.showFirstLast&&(r={value:t.textLast,title:t.textTitleLast,aClass:t.textLastClass,page:e})}var p=function(e,a){return{title:e.title,aClass:e.aClass,value:e.aClass?"":e.value,liClass:a?t.disabledClass:"",pgHref:a?"":t.pgHref.replace(x,e.page),action:function(){a||s(t,e.page)}}};if(t.isDisabled&&(i=!0),l){var o=p(l,i);t.List.push(o)}if(r){var d=p(r,i);t.List.push(d)}}}function l(t,e,a){var i=0;for(i=t;i<=e;i++){var l=a.pgHref.replace(x,i),r=a.page==i?a.activeClass:"";a.isDisabled&&(l="",r=a.disabledClass),a.List.push({value:i,title:a.textTitlePage.replace(x,i),liClass:r,pgHref:l,action:function(){s(a,this.value)}})}}function r(t){t.List.push({value:t.dots,liClass:t.disabledClass})}function n(t,e){l(1,2,t),3!=e&&r(t)}function g(t,e,a){a!=t-2&&r(e),l(t-1,t,e)}function p(e,s){(!e.pageSize||e.pageSize<=0)&&(e.pageSize=1);var r=Math.ceil(e.total/e.pageSize);t(e,s),a(e,r);var p,x,o=2*e.adjacent+2;i(e,r,"prev"),r<=o+2?l(p=1,r,e):e.page-e.adjacent<=2?(l(p=1,x=1+o,e),g(r,e,x)):e.page<r-(e.adjacent+2)?(p=e.page-e.adjacent,x=e.page+e.adjacent,n(e,p),l(p,x,e),g(r,e,x)):(x=r,n(e,p=r-o),l(p,x,e)),i(e,r,"next")}var x=/\{page\}/g;return{restrict:"EA",link:function(t,e,a){t.$watchCollection("[page,pageSize,total,disabled]",function(){p(t,a)})},template:function(t,e){return'<ul data-ng-hide="Hide" data-ng-class="ulClass"> <li title="{{Item.title}}" data-ng-class="Item.liClass" data-ng-repeat="Item in List"> <a '+(e.pgHref?'data-ng-href="{{Item.pgHref}}" ':"href ")+'data-ng-class="Item.aClass" data-ng-click="Item.action()" data-ng-bind="Item.value"></a> </li></ul>'},scope:{page:"=",pageSize:"=",total:"=",disabled:"@",dots:"@",ulClass:"@",activeClass:"@",disabledClass:"@",adjacent:"@",pagingAction:"&",pgHref:"@",textFirst:"@",textLast:"@",textNext:"@",textPrev:"@",textFirstClass:"@",textLastClass:"@",textNextClass:"@",textPrevClass:"@",textTitlePage:"@",textTitleFirst:"@",textTitleLast:"@",textTitleNext:"@",textTitlePrev:"@"}}});